<html>
    <head>
        <style>
            :root {
                --red: #ff4136;
                --blue: #3498db;
                --green: #27af61;
                --yellow: #ffdc00;
            }

            .red { color: var(--red); }
            .blue { color: var(--blue); }
            .green { color: var(--green); }
            .yellow { color: var(--yellow); }

            @font-face {
                font-family: Snowstorm;
                src: url(snowstorm.otf);
            }

            body {
                width: 450px;
                background: black;
                user-select: none;
            }

            #titleselector {
                font-family: Arial, Helvetica, sans-serif;
                color: white;
                font-size: 0.8rem;
            }

            #alternativeplayerselector {
                color: white;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 0.8rem;
            }

            #playerselector {
                font-family: Arial, Helvetica, sans-serif;
                color: white;
                width: 350px;
            }

            #scoreoverlaycontainer {
                position: relative;
                text-align: center;
                font-family: Snowstorm;
                font-size: 1.5rem;
                color: white;
            }

            #title {
                position: absolute;
                top: 45px;
                left: 215px;
                transform: translate(-50%, -50%);
                width: 370px;
                height: 32px;
                vertical-align: top;
            }
            
            #p1icon {
                width: 40px;
                height: 40px;
                position: absolute;
                top: 66px;
                left: 25px;
            }

            #p1icon img {
                width: 100%;
                height: 100%;
                border: 2px solid #40260a;
            }

            #p2icon {
                width: 40px;
                height: 40px;
                position: absolute;
                top: 122px;
                left: 25px;
            }

            #p2icon img {
                width: 100%;
                height: 100%;
                border: 2px solid #40260a;
            }

            #p1name {
                position: absolute;
                top: 74px;
                left: 75px;
            }

            #p2name {
                position: absolute;
                top: 127px;
                left: 75px;
            }
            
            input[type="button"] {
                width: 44px;
                height: 44px;
                padding: 0 0 0 0;
                background: none;
                color: white;
                border: none;
                font-family: Snowstorm;
                font-size: 2.2rem;
                outline: none;
            }

            input[type="radio"] {
                border: 0px;
                width: 1.7em;
                height: 1.7em;
            }

            #p1score {
                position: absolute;
                top: 69px;
                right: 45px;
            }

            #p2score {
                position: absolute;
                top: 119px;
                right: 45px;
            }

            #bestof{
                position: absolute;
                left: 328px;
                transform: translate(-50%, -50%);
                top: 191px;
            }

            .column {
                flex:50%;
            }

            .row {
                display: flex;
            }

        </style>
    </head>
    <body>
        <!--the image and scoreboard text-->
        <div class="row">
            <div class="column">
                
                <div id="scoreoverlaycontainer" oncontextmenu="return false">
                    <img src="images/scoreboard.png" width=450px>
                    <div id="title"></div>
                    <div id="p1icon"></div>
                    <div id="p2icon"></div>
                    <div id="p1name">Click name to change faction</div>
                    <div id="p2name">Click score to add score</div>
                    <input type="button" id="p1score" onclick="incrementp1Score()" oncontextmenu="decrementp1Score()" value="0">
                    <input type="button" id="p2score" onclick="incrementp2Score()" oncontextmenu="decrementp2Score()" value="0">
                    <div id="bestof">BEST OF </div>
                  </div>
        
                <!-- <form id="streamerinput" name="streamerinput"> -->
                <div id="titleselector">
                    <p>
                    Title Selector: <br>
                    (changes the header text and filters dropdown boxes below) <br>
                    <div class="row">
                        <div class="column">
                            <input type="radio" name="league" class="league" id="premier-division" value="Premier Division">
                            <label for="premier-division">Premier Division</label><br>
                            <input type="radio" name="league" class="league" id="premier-relegation" value="Premier Relegation">
                            <label for="premier-relegation">Premier Relegation</label><br>
                            <input type="radio" name="league" class="league" id="intermediate-division" value="Intermediate Division">
                            <label for="intermediate-division">Inter Division</label><br>
                            <input type="radio" name="league" class="league" id="lower-intermediate" value="Lower Intermediate">
                            <label for="lower-intermediate">Lower Intermediate</label><br>
                            <input type="radio" name="league" class="league" id="beginner-division" value="Beginner Division">
                            <label for="beginner-division">Beginner Division</label><br>
                            <input type="radio" name="league" class="league" id="the-magnificent-21" value="The Magnificent 21">
                            <label for="the-magnificent-21">The Magnificent 21</label><br>
                            <input type="radio" name="league" class="league" id="no-league" value="" checked>
                            <label for="no-league">None</label><br><br>
                        </div>
                        
                        <div class="column">
                            <input type="radio" name="stage" class="stage" id="quarter-final" value=" - Quarter Final">
                            <label for="quarter-final">Quarter Final</label><br>
                            <input type="radio" name="stage" class="stage" id="semi-final" value=" - Semi Final">
                            <label for="semi-final">Semi Final</label><br>
                            <input type="radio" name="stage" class="stage" id="final" value=" - Final">
                            <label for="final">Final</label><br>
                            <input type="radio" name="stage" class="stage" id="third-place" value=" - Third Place">
                            <label for="third-place">Third Place</label><br>
                            <input type="radio" name="stage" class="stage" id="no-stage" value="" checked>
                            <label for="no-stage">None</label>
                        </div>
        
                        <div class="column">
                            Best of: <br>
                            <input type="radio" name="bo" class="bo" id="best-of-3" value="3">
                            <label for="best-of-3">3</label><br>
                            <input type="radio" name="bo" class="bo" id="best-of-5" value="5">
                            <label for="best-of-5">5</label><br>
                            <input type="radio" name="bo" class="bo" id="best-of-7" value="7">
                            <label for="best-of-7">7</label><br>
                            <input type="radio" name="bo" class="bo" id="best-of-9" value="9">
                            <label for="best-of-9">9</label>
                        </div>
        
                    </div>
                    </p>
                </div>
                
                <div id="alternativeplayerselector">
                    <div class="row">
                        <div class="column">
                            <label for="player1textbox">Player 1</label>
                            <input type="text" name="player1" id="player1textbox" oninput="changePlayer1text()">
                        </div>
                        <div class="column">
                            <label for="player1textbox">Player 2</label>
                            <input type="text" name="player2" id="player2textbox" oninput="changePlayer2text()">
                        </div>
                    </div>
                </div>
            </div>
                <div class="column">
		            <div id="playerselector">
		                <div class="row">
			                <div class="column">
			                	Player 1: <br>
			                	<div id="players1"></div>
			                </div>
			                <div class="column">
					            Player 2: <br>
					            <div id="players2"></div>
			                </div>
			            </div>
		                <button type="button" onclick=resetScores()>Reset Score</button>
		            </div>
		        </div>
		    </div>
        <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/textFit.js"></script>
        <script>
        	
        
            function leagueChange() {
                // change the title first
                var leagueselector = document.getElementsByName("league");
                var stageselector = document.getElementsByName("stage")
                var league;
                var stage;

                for(var i = 0; i < leagueselector.length; i++){
                    if(leagueselector[i].checked){
                        league = leagueselector[i].value;
                        leagueId = leagueselector[i].id;
                        break;
                    }
                }
                for(var i = 0; i < stageselector.length; i++){
                    if(stageselector[i].checked){
                        stage = stageselector[i].value;
                        break;
                    }
                }
                showPlayers(document.querySelector('.league:checked').id);

                document.getElementById("title").innerHTML = (league + stage).toUpperCase();

                // change the title size dynamically
                textFit(document.querySelector("#title"), {minFontSize:0, alignVert: true});
            }

            function showPlayers(league) {
                var playersToShow = Object.values(players).reduce((a, b) => (b.leagues.includes(league) && a.push(b.name), a), []);

				document.getElementById('players1').innerHTML = '';
				document.getElementById('players2').innerHTML = '';

                playersToShow.forEach(function(player) {
                	document.getElementById('players1').innerHTML += '<input type="radio" name="player1" id="' + player + '" onchange="changePlayer1()"><label for="' + player + '">' + player + '</label><br>';
                	document.getElementById('players2').innerHTML += '<input type="radio" name="player2" id="' + player + '2" onchange="changePlayer2()"><label for="' + player + '2">' + player + '</label><br>';
                });
            }

            function boChange() {
                var boselector = document.getElementsByName("bo");
                var bonumber;

                for (let i = 0; i < boselector.length; i++) {
                    if (boselector[i].checked) {
                        bonumber = boselector[i].value;
                        break;
                    }
                }

                document.getElementById("bestof").innerHTML = "BEST OF " + bonumber;
            }

            function incrementp1Score() {
                document.getElementById("p1score").value++
            }

            function incrementp2Score() {
                document.getElementById("p2score").value++
            }

            function decrementp1Score() {
                document.getElementById("p1score").value--
            }

            function decrementp2Score() {
                document.getElementById("p2score").value--
            }

            function changePlayer1() {
                var player = document.getElementsByName("player1")
                for (let i = 0; i < player.length; i++) {
                    if (player[i].checked) {
                        playerId = player[i].id
                        document.getElementById("p1name").innerHTML = playerId.toUpperCase();
                        break;
                    }
                }
                // TODO:
                // eventually should replace this with just referencing 'image/picture.png'
                // but right now trying to fix a problem with minimal effort
                document.getElementById("p1icon").innerHTML = `<img src="${idToPfpURL[playerId]}" onerror="this.style.display='none'" />`;
            }

            function changePlayer2() {
                var player = document.getElementsByName("player2")
                for (let i = 0; i < player.length; i++) {
                    if (player[i].checked) {
                        playerId = player[i].id.slice(0, -1) 
                        document.getElementById("p2name").innerHTML = playerId.toUpperCase();
                        break;
                    }
                }
                document.getElementById("p2icon").innerHTML = `<img src="${idToPfpURL[playerId]}" onerror="this.style.display='none'" />`;
            }

            function changePlayer1text() {
                var player = document.getElementById("player1textbox").value
                document.getElementById("p1name").innerHTML = player.toUpperCase();
                document.getElementById("p1icon").innerHTML = "";
            }

            function changePlayer2text() {
                var player = document.getElementById("player2textbox").value
                document.getElementById("p2name").innerHTML = player.toUpperCase();
                document.getElementById("p2icon").innerHTML = "";
            }

            function resetScores() {
                document.getElementById("p1score").value = 0;
                document.getElementById("p2score").value = 0;
            }

            var colors = ["#ff4136", "#3498db", "#27af61", "#ffdc00"]

            function hexToRgb(hex) {
                var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : null;
            }

            let div1 = document.querySelector('#p1name');
            div1.addEventListener("click", function() {
                if (div1.classList.contains("red")) {
                    div1.classList.remove("red");
                    div1.classList.add("blue");
                } else if (div1.classList.contains("blue")) {
                    div1.classList.remove("blue");
                    div1.classList.add("green");
                } else if (div1.classList.contains("green")) {
                    div1.classList.remove("green");
                    div1.classList.add("yellow");
                } else if (div1.classList.contains("yellow")) {
                    div1.classList.remove("yellow");
                    div1.classList.add("red");
                } else {
                    div1.classList.add("red");
                }
            })

            div1.addEventListener("contextmenu", function() {
                if (div1.classList.contains("red")) {
                    div1.classList.remove("red");
                    div1.classList.add("yellow");
                } else if (div1.classList.contains("blue")) {
                    div1.classList.remove("blue");
                    div1.classList.add("red");
                } else if (div1.classList.contains("green")) {
                    div1.classList.remove("green");
                    div1.classList.add("blue");
                } else if (div1.classList.contains("yellow")) {
                    div1.classList.remove("yellow");
                    div1.classList.add("green");
                } else {
                    div1.classList.add("yellow");
                }
            })

            let div2 = document.querySelector('#p2name');
            div2.addEventListener("click", function() {
                if (div2.classList.contains("red")) {
                    div2.classList.remove("red");
                    div2.classList.add("blue");
                } else if (div2.classList.contains("blue")) {
                    div2.classList.remove("blue");
                    div2.classList.add("green");
                } else if (div2.classList.contains("green")) {
                    div2.classList.remove("green");
                    div2.classList.add("yellow");
                } else if (div2.classList.contains("yellow")) {
                    div2.classList.remove("yellow");
                    div2.classList.add("red");
                } else {
                    div2.classList.add("red");
                }
            })

            div2.addEventListener("contextmenu", function() {
                if (div2.classList.contains("red")) {
                    div2.classList.remove("red");
                    div2.classList.add("yellow");
                } else if (div2.classList.contains("blue")) {
                    div2.classList.remove("blue");
                    div2.classList.add("red");
                } else if (div2.classList.contains("green")) {
                    div2.classList.remove("green");
                    div2.classList.add("blue");
                } else if (div2.classList.contains("yellow")) {
                    div2.classList.remove("yellow");
                    div2.classList.add("green");
                } else {
                    div2.classList.add("yellow");
                }
            })
            
            idToPfpURL = {
                "Arilou":"images/arilou.png",
                "Jakobi":"https://cdn.discordapp.com/avatars/168111817489514496/6aca97e203c21883c1ff6f6af52c57e9.png",
                "JetEriksen":"https://cdn.discordapp.com/avatars/155604773314232322/1a5bd3f060024ae4639afc3721a20f2e.png",
                "Melvinfro":"https://cdn.discordapp.com/avatars/470976187817000960/703458f10652a60c2d2e8896e1c34ff8.png",
                "Mishi":"images/mishi.png",
                "mocaccino":"images/mocaccino.png",
                "qq":"https://cdn.discordapp.com/avatars/256576958899421185/d419ffa8ce5ef765b2219274a835285b.png",
                "The Gentleman":"images/thegentleman.png",
                "EELuminatus":"https://cdn.discordapp.com/avatars/220804933769756672/3f20f15840fce53d9cfa0217cb9d564e.png",
                "Epicosity":"https://cdn.discordapp.com/avatars/596570018595078155/4c160dc09f9f5b6ffeebc6254e26634d.png",
                "Heartseed":"https://cdn.discordapp.com/avatars/142778020480942082/3de440b47a4387572c37cc25679ce3ff.png",
                "Meek":"images/meek.png",
                "Protokam":"https://cdn.discordapp.com/avatars/389233786518503425/2f9eff9561dd85a073587319eec27b6d.png",
                "Satoros":"images/satoros.png",
                "Sulomon":"images/sulomon.png",
                "Trumpet":"images/trumpet.png",
                "boomer549":"https://cdn.discordapp.com/avatars/216372992102498304/064b703a1f7faab1039f2137c2824a3b.png",
                "Daffy":"https://cdn.discordapp.com/avatars/581195665187668018/15c214bbf95cbf132657a491915710fc.png",
                "elverdulerojorge":"https://discord.com/assets/1cbd08c76f8af6dddce02c5138971129.png",
                "Horus the Holy":"https://cdn.discordapp.com/avatars/182629275516665857/82b85961000586114b473f461e20deb7.png",
                "Kin_Replica":"https://cdn.discordapp.com/avatars/135246997883060224/b79ceb41e08864e081f7453b56f11a67.png",
                "niccolaccio":"https://discord.com/assets/1cbd08c76f8af6dddce02c5138971129.png",
                "Whitexcat":"https://cdn.discordapp.com/avatars/170711129130139648/e40c4c69431937298a032413c6b7dba2.png",
                "Wyld Kin":"https://cdn.discordapp.com/avatars/459701156231512065/9f1567637eee35f0ecbb635f351a9467.png",
                "Big Pimpintosh":"images/bigpimpintosh.png",
                "Kerpa":"https://cdn.discordapp.com/avatars/201794862805155840/9e6b8992fc18bc16ad5d3fa9fa0948c9.png",
                "Necromanticer":"images/necromanticer.png",
                "Weasel":"images/weasel.png",
                "Delthius":"https://cdn.discordapp.com/avatars/264484977868144670/40e706b48d053b044aa13f65d1eaefff.png",
                "dzon":"https://cdn.discordapp.com/avatars/374628283117076490/a53d16bbf37bf9b665f0153c16a8ebe5.png",
                "FleurDeLys":"https://cdn.discordapp.com/avatars/625709316887937037/20f72d7f4992c119943a8698bd344016.png",
                "Kolaru":"https://cdn.discordapp.com/avatars/314190533301895178/000f5820a123bb48897b3ca2b96a0786.png",
                "octapi":"https://cdn.discordapp.com/avatars/221731646267850754/b286dc4b1dd3aa160f834864c11d0738.png",
                "Pawulon":"https://cdn.discordapp.com/avatars/282678880978862090/9238bda77b1d06736833fe11d0ea4c66.png",
                "roman":"https://cdn.discordapp.com/avatars/517323127626268673/5cbeaea5439043837de0e076fa63cda7.png",
                "Stoecker":"https://cdn.discordapp.com/avatars/224307627746656257/1cda10b4bec69131229de60aa17c0661.png"
            }
            
            var players = {
				'anki': {
					'name': 'Anki',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'arilou': {
					'name': 'Arilou',
					'leagues': [
						'premier-division',
						'the-magnificent-21'
					]
				},
				'big-pimpintosh': {
					'name': 'Big Pimpintosh',
					'leagues': [
						'premier-division',
						'the-magnificent-21'
					]
				},
				'daffy': {
					'name': 'daffy',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'delthius': {
					'name': 'Delthius',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'eeluminatus': {
					'name': 'EELuminatus',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'elverdulerojorge': {
					'name': 'elverdulerojorge',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'enamel': {
					'name': 'Enamel',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'epicosity': {
					'name': 'Epicosity',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'fleurdelys': {
					'name': 'FleurDeLys',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'gigger-goris': {
					'name': 'Gigger Goris',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'heartseed': {
					'name': 'Heartseed',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'jakobi': {
					'name': 'Jakobi',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'james': {
					'name': 'James',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'jeteriksen': {
					'name': 'JetEriksen',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'jvela': {
					'name': 'Jvela',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'kerpa': {
					'name': 'Kerpa',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'kolaru': {
					'name': 'Kolaru',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'legomann96': {
					'name': 'Legomann96',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'marmu': {
					'name': 'Marmu',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'mocaccino': {
					'name': 'mocaccino',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'premiumbow426': {
					'name': 'PremiumBow426',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'qq': {
					'name': 'qq',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'reben-lied': {
					'name': 'Raben Lied',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'roman': {
					'name': 'Roman',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'pigeon-rush': {
					'name': 'Pigeon Rush',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'thesassymarquess': {
					'name': 'TheSassyMarquess',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'snetch': {
					'name': 'Snetch',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'thechild': {
					'name': 'TheChild',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'thisguy': {
					'name': 'ThisGuy',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'tiki-gray': {
					'name': 'Tiki Gray',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'wyld-kin': {
					'name': 'Wyld Kin',
					'leagues': [
						'the-magnificent-21'
					]
				},
				'mrziggy': {
					'name': 'MrZiggy',
					'leagues': [
						'the-magnificent-21'
					]
				}
			};
        </script>
    </body>
</html>